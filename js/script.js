const translations = {
  id: {
    pageTitle: "Dani Almansah - Portofolio",
    navHome: "Home",
    navAbout: "Tentang",
    navSkills: "Skill",
    navPortfolio: "Portofolio",
    navExperience: "Pengalaman",
    navGallery: "Galeri",
    navContact: "Kontak",
    profileBio: "Junior Web Developer & Designer Grafis",
    hireMeBtn: "Sewa Saya",
    downloadCvBtn: "Unduh CV",
    aboutTitle: "Tentang <span>Saya</span>",
    aboutDescription:
      "Saya lulusan Sarjana Sistem Informasi dengan IPK 3,41 dari Universitas Islam Negeri Sumatera Utara. Saya berpengalaman dalam desain grafis dan pengembangan web, dengan kemampuan menciptakan desain yang menarik dan fungsional serta mengembangkan aplikasi web yang responsif dan ramah pengguna.",
    mainSkillsTab: "Skill Utama",
    educationTab: "Pendidikan",
    languageTab: "Penguasaan Bahasa",
    skillWebDev: "Pengembangan Web",
    skillGraphicDesign: "Desain Grafis",
    skillOffice: "Microsoft Office",
    eduDegree: "Lulusan Sistem Informasi",
    eduUniversity: "Universitas Islam Negeri Sumatera Utara, Sep 2020 - Feb 2025",
    langIndonesian: "Indonesia",
    langEnglish: "Inggris",
    mySkillsTitle: "Skill <span>Saya</span>",
    phpDesc: "Scripting sisi server dan pengembangan backend",
    photoshopDesc: "Pengeditan foto",
    canvaDesc: "Desain untuk media sosial dan branding",
    coreldrawDesc: "Ilustrasi vektor dan desain cetak",
    officeDesc: "Word, Excel, PowerPoint untuk produktivitas",
    bootstrapDesc: "Kerangka kerja desain web responsif",
    portfolioTitle: "Portofolio <span>Saya</span>",
    viewProjectBtn: "Lihat Projek",
    project1Title: "Sistem Informasi Manajemen Masjid",
    project1Desc: "Pembuatan website Sistem Informasi Manajemen Masjid Pada Masjid Al-Falah untuk mengatur keuangan masjid, menggunakan bahasa pemrograman PHP dan Bootstrap.",
    project2Title: "Desain Sampul Buku",
    project2Desc: "Pembuatan cover buku untuk perusahaan Edi Makmur menggunakan aplikasi CorelDraw X7.",
    project3Title: "Desain Brosur",
    project3Desc: "Pembuatan desain brosur untuk lowongan kerja untuk PT Solid Indo Grub.",
    project4Title: "Desain Spanduk TK",
    project4Desc: "Pembuatan desain spanduk pada TK Hanayovalin, menggunakan aplikasi dan tools CorelDraw.",
    project5Title: "Sistem Informasi Pelaporan Bencana Kota Stabat",
    project5Desc: "Perancangan dan pembangunan Sistem Informasi Pelaporan Bencana Kota Stabat menggunakan bahasa pemrograman PHP Native dan Bootstrap.",
    experienceTitle: "Pengalaman <span>Kerja</span>",
    exp1Date: "Jul 2020 – Agu 2025",
    exp1Company: "CV. Mitra Utama Printing/Smart Print - Medan",
    exp1Position: "Posisi: Operator Komputer & Desain Grafis",
    exp1Desc1: "• Mendesain spanduk promosi untuk TK Hanayovalin dengan konsep ramah anak, menggunakan warna cerah, ilustrasi lucu, dan tipografi yang mudah dibaca.",
    exp1Desc2: "• Mendesain cover buku TOCFL HSK untuk Mandarin Books Group.",
    exp1Desc3: "• Mendesain spanduk qurban untuk masjid Al – Hidayah Medan dengan konsep Islami.",
    exp1Desc4: "• Mendesain brosur lamaran kerja untuk PT. Solid Indo Grub dengan konsep ceria dan simpel.",
    exp1Desc5: "• Mendesain cover buku skripsi untuk STIE Eka Prasetya Medan dengan konsep yang sesuai pada prosedur instansi pendidikan.",
    exp1Desc6: "• Menggunakan perangkat lunak Microsoft Office (Word, Excel) untuk meningkatkan operasinal perusahaan.",
    exp1ToolsDesignTitle: "Tools Desain:",
    exp1ToolsDesignDesc: "Menggunakan perangkat lunak desain grafis seperti Canva, Photoshop, dan CorelDraw untuk menciptakan desain yang berkualitas tinggi.",
    exp1OfficeToolsTitle: "Office Tools:",
    exp1OfficeToolsDesc: "Menggunakan perangkat lunak Microsoft Office (Word, Excel) untuk meningkatkan operasinal perusahaan dan memberikan layanan cepat dalam memenuhi permintaan pelanggan dengan tingkat kepuasan yang tinggi.",
    exp2Date: "Okt 2023 - Nov 2023",
    exp2Company: "Kementerian PUPR – Balai Wilayah Sungai Sumatera II (Magang)",
    exp2Position: "Posisi: Staff Administrasi SNVT PJSA",
    exp2Desc1: "• Melakukan penyusunan dan pembuatan surat perjalanan dinas untuk kegiatan operasional internal, termasuk koordinasi dengan pihak-pihak terkait guna memastikan keakuratan data dan kelengkapan administrasi surat.",
    exp2Desc2:
      "• Melaksanakan tugas pengarsipan surat masuk dan keluar dengan sistematis dan rapi, serta menyusun laporan pengarsipan secara berkala untuk mendukung kelancaran administrasi di lingkungan SNVT PJSA (Satuan Non Vertikal Tertentu Pengelolaan Jaringan Sumber Air).",
    exp2Desc3: "• Meningkatkan pemahaman terhadap struktur birokrasi pemerintahan dan praktik administrasi di instansi teknis bidang pekerjaan umum dan sumber daya air.",
    exp2Desc4: "• Merancang dan membangun Sistem Informasi Pengarsipan Surat divisi SNVT PJSA untuk penyimpanan data agar lebih tertata rapi dan mengurangi potensi kerusakan data.",
    exp2ResponsibilitiesTitle: "Tugas dan Tanggung Jawab:",
    exp2ResponsibilitiesDesc:
      "Melaksanakan tugas dan tanggung jawab pengarsipan surat masuk dan keluar dengan sistematis dan rapi, serta menyusun laporan pengarsipan secara berkala untuk mendukung kelancaran administrasi di lingkungan SNVT PJSA (Satuan Non Vertikal Tertentu Pengelolaan Jaringan Sumber Air).",
    exp2GoalsTitle: "Tujuan Magang:",
    exp2GoalsDesc: "Meningkatkan pemahaman terhadap struktur birokrasi pemerintahan dan praktik administrasi di instansi teknis bidang pekerjaan umum dan sumber daya air.",
    exp3Date: "Masa Depan",
    exp3Company: "Masa Depan",
    exp3Position: "-",
    galleryTitle: "Galeri <span>Saya</span>",
    hobbyTouring: "Touring",
    hobbyCamping: "Camping",
    contactTitle: "Kontak <span>Saya</span>",
    contactSubtitle: "Silahkan Klik",
    contactTalk: "Mari bicarakan proyek Anda",
    contactFeelFree: "Jangan ragu untuk menghubungi saya.",
    emailLabel: "Email",
    phoneLabel: "Telepon",
    locationLabel: "Lokasi",
    locationDesc: "Medan, Sumatera Utara, Indonesia",
    yourNamePlaceholder: "Nama Anda",
    yourEmailPlaceholder: "Email Anda",
    subjectPlaceholder: "Subjek",
    yourMessagePlaceholder: "Pesan Anda",
    sendBtn: "Kirim",
    quickLinksTitle: "Tautan Cepat",
    newsletterTitle: "Buletin",
    newsletterDesc: "Kirim untuk mendapatkan pembaruan dan wawasan",
    copyrightText: "Hak Cipta oleh | Dani Almansah",
  },
  en: {
    pageTitle: "Dani Almansah - Portfolio",
    navHome: "Home",
    navAbout: "About",
    navSkills: "Skills",
    navPortfolio: "Portfolio",
    navExperience: "Experience",
    navGallery: "Gallery",
    navContact: "Contact",
    profileBio: "Junior Web Developer & Graphic Designer",
    hireMeBtn: "Hire Me",
    downloadCvBtn: "Download CV",
    aboutTitle: "About <span>Me</span>",
    aboutDescription:
      "I am a Bachelor of Information Systems graduate with a GPA of 3.41 from UIN North Sumatra. I have experience in graphic design and web development, with the ability to create attractive and functional designs and develop responsive and user-friendly web applications.",
    mainSkillsTab: "Main Skills",
    educationTab: "Education",
    languageTab: "Language Proficiency",
    skillWebDev: "Web Development",
    skillGraphicDesign: "Graphic Design",
    skillOffice: "Microsoft Office",
    eduDegree: "Bachelor of Information Systems",
    eduUniversity: "UIN North Sumatra, Sep 2020 - Feb 2025",
    langIndonesian: "Indonesian",
    langEnglish: "English",
    mySkillsTitle: "My <span>Skills</span>",
    phpDesc: "Server-side scripting and backend development",
    photoshopDesc: "Photo editing",
    canvaDesc: "Design for social media and branding",
    coreldrawDesc: "Vector illustration and print design",
    officeDesc: "Word, Excel, PowerPoint for productivity",
    bootstrapDesc: "Responsive web design framework",
    portfolioTitle: "My <span>Portfolio</span>",
    viewProjectBtn: "View Project",
    project1Title: "Mosque Management Information System",
    project1Desc: "Website development for Al-Falah Mosque Management Information System to manage mosque finances, using PHP and Bootstrap.",
    project2Title: "Book Cover Design",
    project2Desc: "Book cover design for Edi Makmur company using CorelDraw X7 application.",
    project3Title: "Brochure Design",
    project3Desc: "Brochure design for job vacancies for PT Solid Indo Grub.",
    project4Title: "Kindergarten Banner Design",
    project4Desc: "Banner design for Hanayovalin Kindergarten, using CorelDraw application and tools.",
    project5Title: "Stabat City Disaster Reporting Information System",
    project5Desc: "Design and development of Stabat City Disaster Reporting Information System using Native PHP and Bootstrap.",
    experienceTitle: "Work <span>Experience</span>",
    exp1Date: "Jul 2020 – Agu 2025",
    exp1Company: "CV. Mitra Utama Printing/Smart Print - Medan",
    exp1Position: "Position: Computer Operator & Graphic Designer",
    exp1Desc1: "• Designed promotional banners for Hanayovalin Kindergarten with a child-friendly concept, using bright colors, cute illustrations, and readable typography.",
    exp1Desc2: "• Designed TOCFL HSK book covers for Mandarin Books Group.",
    exp1Desc3: "• Designed Qurban banners for Al-Hidayah Mosque Medan with an Islamic concept.",
    exp1Desc4: "• Designed job application brochures for PT Solid Indo Grub with a cheerful and simple concept.",
    exp1Desc5: "• Designed thesis book covers for STIE Eka Prasetya Medan with a concept in accordance with educational institution procedures.",
    exp1Desc6: "• Utilized Microsoft Office software (Word, Excel) to enhance company operations.",
    exp1ToolsDesignTitle: "Design Tools:",
    exp1ToolsDesignDesc: "Used graphic design software such as Canva, Photoshop, and CorelDraw to create high-quality designs.",
    exp1OfficeToolsTitle: "Office Tools:",
    exp1OfficeToolsDesc: "Used Microsoft Office software (Word, Excel) to enhance company operations and provide fast service in meeting customer demands with high satisfaction levels.",
    exp2Date: "Oct 2023 - Nov 2023",
    exp2Company: "Ministry of Public Works and Housing – Sumatera II River Basin Organization (Internship)",
    exp2Position: "Position: PJSA SNVT Administrative Staff",
    exp2Desc1: "• Prepared and created official travel letters for internal operational activities, including coordination with relevant parties to ensure data accuracy and completeness of administrative letters.",
    exp2Desc2:
      "• Performed systematic and neat archiving of incoming and outgoing letters, and prepared periodic archiving reports to support smooth administration within the PJSA SNVT (Specific Non-Vertical Unit for Water Resources Network Management) environment.",
    exp2Desc3: "• Enhanced understanding of government bureaucracy structure and administrative practices in technical agencies in public works and water resources.",
    exp2Desc4: "• Designed and built an Archiving Information System for the PJSA SNVT division for better data storage and to reduce the potential for data damage.",
    exp2ResponsibilitiesTitle: "Duties and Responsibilities:",
    exp2ResponsibilitiesDesc:
      "Carried out duties and responsibilities for systematic and neat archiving of incoming and outgoing letters, and compiled periodic archiving reports to support smooth administration within the PJSA SNVT (Specific Non-Vertical Unit for Water Resources Network Management) environment.",
    exp2GoalsTitle: "Internship Goals:",
    exp2GoalsDesc: "To enhance understanding of government bureaucracy structure and administrative practices in technical agencies in public works and water resources.",
    exp3Date: "Future",
    exp3Company: "Future",
    exp3Position: "-",
    galleryTitle: "My <span>Gallery</span>",
    hobbyTouring: "Touring",
    hobbyCamping: "Camping",
    contactTitle: "Contact <span>Me</span>",
    contactSubtitle: "Click Here",
    contactTalk: "Let's discuss your project",
    contactFeelFree: "Feel free to contact me.",
    emailLabel: "Email",
    phoneLabel: "Phone",
    locationLabel: "Location",
    locationDesc: "Medan, North Sumatra, Indonesia",
    yourNamePlaceholder: "Your Name",
    yourEmailPlaceholder: "Your Email",
    subjectPlaceholder: "Subject",
    yourMessagePlaceholder: "Your Message",
    sendBtn: "Send",
    quickLinksTitle: "Quick Links",
    newsletterTitle: "Newsletter",
    newsletterDesc: "Sign up to get updates and insights",
    copyrightText: "Copyright by | Dani Almansah",
  },
};

document.addEventListener("DOMContentLoaded", () => {
  // Preloader
  const preloader = document.querySelector(".preloader");
  if (preloader) {
    window.addEventListener("load", () => {
      preloader.classList.add("loaded");
      setTimeout(() => {
        preloader.remove();
      }, 500);
    });
  }

  // Navbar Sticky & Active Link
  const navbar = document.getElementById("navbar");
  const navLinks = document.querySelectorAll(".nav-links a");
  const sections = document.querySelectorAll("section");

  function changeActiveLink() {
    let current = "";
    sections.forEach((section) => {
      const sectionTop = section.offsetTop;
      if (scrollY >= sectionTop - 150) {
        current = section.getAttribute("id");
      }
    });

    navLinks.forEach((a) => {
      a.classList.remove("active");
      if (a.getAttribute("href").includes(current)) {
        a.classList.add("active");
      }
    });
  }

  window.addEventListener("scroll", () => {
    if (window.scrollY > 50) {
      navbar.classList.add("sticky");
    } else {
      navbar.classList.remove("sticky");
    }
    changeActiveLink();
  });

  // Smooth Scroll
  navLinks.forEach((link) => {
    link.addEventListener("click", function (e) {
      e.preventDefault();
      const targetId = this.getAttribute("href");
      const targetSection = document.querySelector(targetId);
      if (targetSection) {
        window.scrollTo({
          top: targetSection.offsetTop - 80,
          behavior: "smooth",
        });
      }
    });
  });

  // Mobile Menu Toggle
  const navToggle = document.getElementById("navToggle");
  const navMenu = document.querySelector(".nav-links");
  navToggle.addEventListener("click", () => {
    navMenu.classList.toggle("active");
  });

  // Back to Top Button
  const backToTopBtn = document.getElementById("backToTop");
  window.addEventListener("scroll", () => {
    if (window.scrollY > 300) {
      backToTopBtn.classList.add("show");
    } else {
      backToTopBtn.classList.remove("show");
    }
  });

  // Set current year in footer
  const yearSpan = document.getElementById("year");
  if (yearSpan) {
    yearSpan.textContent = new Date().getFullYear();
  }

  // Tab functionality
  const tabButtons = document.querySelectorAll(".tab-btn");
  tabButtons.forEach((button) => {
    button.addEventListener("click", () => {
      const tabName = button.dataset.tab;
      document.querySelectorAll(".tab-btn").forEach((btn) => btn.classList.remove("active"));
      document.querySelectorAll(".tab-content").forEach((content) => content.classList.remove("active"));
      button.classList.add("active");
      document.getElementById(`${tabName}-tab`).classList.add("active");
    });
  });

  // Animate progress bars
  const skillItems = document.querySelectorAll(".skill-item");
  const languageItems = document.querySelectorAll(".language-item");

  function animateProgressBars(items) {
    items.forEach((item) => {
      const percent = item.dataset.percent;
      const progressFill = item.querySelector(".progress-fill");
      progressFill.style.width = percent;
    });
  }

  // Trigger animation when the section is in view
  const observerOptions = {
    root: null,
    rootMargin: "0px",
    threshold: 0.5,
  };

  const observer = new IntersectionObserver((entries, observer) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        if (entry.target.id === "about") {
          animateProgressBars(skillItems);
          animateProgressBars(languageItems);
        }
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);

  const aboutSection = document.getElementById("about");
  if (aboutSection) {
    observer.observe(aboutSection);
  }

  // Dark/Light Mode Toggle
  const themeToggle = document.getElementById("theme-toggle");
  const body = document.body;
  const currentTheme = localStorage.getItem("theme");

  // Check if user has a saved theme preference
  if (currentTheme) {
    body.classList.add(currentTheme);
    if (currentTheme === "dark-mode") {
      themeToggle.querySelector("i").classList.replace("fa-moon", "fa-sun");
    } else {
      themeToggle.querySelector("i").classList.replace("fa-sun", "fa-moon");
    }
  } else if (window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches) {
    // Check system preference
    body.classList.add("dark-mode");
    themeToggle.querySelector("i").classList.replace("fa-moon", "fa-sun");
    localStorage.setItem("theme", "dark-mode");
  }

  themeToggle.addEventListener("click", () => {
    body.classList.toggle("dark-mode");
    const isDarkMode = body.classList.contains("dark-mode");
    if (isDarkMode) {
      localStorage.setItem("theme", "dark-mode");
      themeToggle.querySelector("i").classList.replace("fa-moon", "fa-sun");
    } else {
      localStorage.setItem("theme", "light-mode");
      themeToggle.querySelector("i").classList.replace("fa-sun", "fa-moon");
    }
  });

  // Language Switcher
  const languageSelect = document.getElementById("language-select");

  function applyTranslations(lang) {
    document.querySelectorAll("[data-lang-key]").forEach((element) => {
      const key = element.dataset.langKey;
      if (translations[lang] && translations[lang][key]) {
        element.innerHTML = translations[lang][key];
      }
    });

    // Handle placeholders
    document.querySelectorAll("[data-lang-placeholder-key]").forEach((element) => {
      const key = element.dataset.langPlaceholderKey;
      if (translations[lang] && translations[lang][key]) {
        element.placeholder = translations[lang][key];
      }
    });

    // Handle page title separately if it's not innerHTML
    const pageTitleElement = document.querySelector("title");
    if (pageTitleElement && pageTitleElement.dataset.langKey) {
      const key = pageTitleElement.dataset.langKey;
      if (translations[lang] && translations[lang][key]) {
        pageTitleElement.textContent = translations[lang][key];
      }
    }

    // Update HTML lang attribute
    document.documentElement.lang = lang;
  }

  // Set default language or retrieve from localStorage
  let storedLang = localStorage.getItem("language");
  if (!storedLang) {
    storedLang = "id"; // Default to Indonesian
    localStorage.setItem("language", storedLang);
  }
  languageSelect.value = storedLang;
  applyTranslations(storedLang);

  languageSelect.addEventListener("change", (event) => {
    const selectedLang = event.target.value;
    localStorage.setItem("language", selectedLang);
    applyTranslations(selectedLang);
  });
});
